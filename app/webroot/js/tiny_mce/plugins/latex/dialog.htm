<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>Ajouter une formule mathématique</title>
	<script type="text/javascript" src="../../tiny_mce_popup.js"></script>
	<script type="text/javascript" src="js/dialog.js"></script>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>

        <script>
            function insertTag(startTag, endTag, textareaId, tagType) {
                    var field  = document.getElementById(textareaId); 
                    var scroll = field.scrollTop;
                    field.focus();

                    if (window.ActiveXObject) { // C'est IE
                            var textRange = document.selection.createRange();            
                            var currentSelection = textRange.text;

                            textRange.text = startTag + currentSelection + endTag;
                            textRange.moveStart("character", -endTag.length - currentSelection.length);
                            textRange.moveEnd("character", -endTag.length);
                            textRange.select();     
                    } else { // Ce n'est pas IE
                            var startSelection   = field.value.substring(0, field.selectionStart);
                            var currentSelection = field.value.substring(field.selectionStart, field.selectionEnd);
                            var endSelection     = field.value.substring(field.selectionEnd);

                            field.value = startSelection + startTag + currentSelection + endTag + endSelection;
                            field.focus();
                            field.setSelectionRange(startSelection.length + startTag.length, startSelection.length + startTag.length + currentSelection.length);
                    } 

                    field.scrollTop = scroll; // et on redéfinit le scroll.
            }
        </script>
</head>
<body>

<form onsubmit="ExampleDialog.insert();return false;" action="#">
	<p>Saisissez ou copier votre code Latex</p>
	<p><input type="button" id="preview" name="preview" value="Prévisualiser" onclick="LatexDialog.preview();" /></p>
	<p><img id="previewImg" src="" alt=""/></p>
               
        <p>
            <input type="button" title="Multiplication" value="x" onclick="insertTag('\\time','','latex');" />
            <input type="button" value="Puissance" onclick="insertTag('^{','}','latex');" />
            <input type="button" value="Indice" onclick="insertTag('_{','}','latex');" />
            <input type="button" value="Fraction" onclick="insertTag('\\frac{numérateur}{dénominateur}','','latex');" />
            <input type="button" value="Racine" onclick="insertTag('\\sqrt{expression}','','latex');" />
            <input type="button" value="Racine n-ième" onclick="insertTag('\\sqrt[n]{expression}','','latex');" />
            <input type="button" value="Somme" onclick="insertTag('\\displaystyle { \\sum_{condition de départ}^{condition d\'arrivée}} expression de la somme','','latex');" />
            <input type="button" value="Limite" onclick="insertTag('\\displaystyle {\\lim_{variable \\rightarrow (valeur vers laquelle tend la variable)}}f(x)','','latex');" />
        </p>
        
        <p>
            <input type="button" value="π" title="Pi" onclick="insertTag('\\pi','','latex');" />
            <input type="button" value="∃" title="Il existe" onclick="insertTag('\\exists','','latex');" />
            <input type="button" value="∈" title="Appartient à" onclick="insertTag('\\in','','latex');" />
            <input type="button" value="∏" onclick="insertTag('\\prod','','latex');" />
            <input type="button" value="∑" onclick="insertTag('\\sum','','latex');" />
            <input type="button" value="√" onclick="insertTag('\\sqrt','','latex');" />
            <input type="button" value="∞" title="Infini" onclick="insertTag('\\infty','','latex');" />
            <input type="button" value="∩" title="Inter" onclick="insertTag('\\cap','','latex');" />
            <input type="button" value="∪" title="Union" onclick="insertTag('\\cup','','latex');" />
            <input type="button" value="∫" onclick="insertTag('\\int','','latex');" />
            <input type="button" value="≠" title="Différent de" onclick="insertTag('\\ne','','latex');" />
            <input type="button" value="≤" title="Inférieur ou égal" onclick="insertTag('\\le','','latex');" />
            <input type="button" value="≥" title="Supérieur ou égal" onclick="insertTag('\\ge','','latex');" />
            <input type="button" value="⇔" title="Equivalent" onclick="insertTag('\\Leftrightarrow','','latex');" />
            <input type="button" value="⇒" title="Implication" onclick="insertTag('\\Rightarrow','','latex');" />
            <input type="button" value="⇐" title="Implication" onclick="insertTag('\\Leftarrow','','latex');" />
            <input type="button" value="α" title="Alpha" onclick="insertTag('\\alpha','','latex');" />
            <input type="button" value="β" title="Bêta" onclick="insertTag('\\beta','','latex');" />
            <input type="button" value="Δ" title="Delta" onclick="insertTag('\\Delta','','latex');" />
            <input type="button" value="Ω" title="Omega" onclick="insertTag('\\Omega','','latex');" />
        </p>
  
	<p><textarea id="latex" name="latex_code" cols="100" rows="19"></textarea></p>

	<div class="mceActionPanel">
		<input type="button" id="insert" name="insert" value="{#insert}" onclick="LatexDialog.insert();" />
		<input type="button" id="cancel" name="cancel" value="{#cancel}" onclick="tinyMCEPopup.close();" />
	</div>
        
</form>
    
</body>
</html>
